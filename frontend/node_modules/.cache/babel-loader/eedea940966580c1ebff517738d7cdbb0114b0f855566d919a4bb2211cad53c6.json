{"ast":null,"code":"var _jsxFileName = \"/Users/marwan.zenhom/Desktop/onboarding-chat/frontend/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { Plus, ArrowUp, User, Bot, Sun, Moon, Edit3, Trash2, Search, Copy, Mic, MicOff, Heart, Archive, Sidebar, ThumbsUp, ThumbsDown, RotateCcw, X, Check, Upload, FileText, Paperclip, MoreHorizontal, Square } from 'lucide-react';\nimport apiService from './services/apiService';\n\n// --- Custom Hooks ---\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useLocalStorage = (key, initialValue) => {\n  _s();\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      const item = window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      return initialValue;\n    }\n  });\n  const setValue = value => {\n    try {\n      setStoredValue(value);\n      window.localStorage.setItem(key, JSON.stringify(value));\n    } catch (error) {\n      console.error('Error saving to localStorage:', error);\n    }\n  };\n  return [storedValue, setValue];\n};\n\n// --- File Upload Component ---\n_s(useLocalStorage, \"hPGcCTsgHkY2HNOJCI6CQWKYY8A=\");\nconst FileUpload = ({\n  onFileSelect,\n  acceptedTypes = \".pdf,.docx,.txt,.csv,.json,.png,.jpg,.jpeg\"\n}) => {\n  _s2();\n  const [isDragging, setIsDragging] = useState(false);\n  const fileInputRef = useRef(null);\n  const handleDrop = e => {\n    e.preventDefault();\n    setIsDragging(false);\n    const files = Array.from(e.dataTransfer.files);\n    onFileSelect(files);\n  };\n  const handleDragOver = e => {\n    e.preventDefault();\n    setIsDragging(true);\n  };\n  const handleDragLeave = () => {\n    setIsDragging(false);\n  };\n  const handleFileSelect = e => {\n    const files = Array.from(e.target.files);\n    onFileSelect(files);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `file-upload-area ${isDragging ? 'dragging' : ''}`,\n    onDrop: handleDrop,\n    onDragOver: handleDragOver,\n    onDragLeave: handleDragLeave,\n    onClick: () => {\n      var _fileInputRef$current;\n      return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      ref: fileInputRef,\n      type: \"file\",\n      multiple: true,\n      accept: acceptedTypes,\n      onChange: handleFileSelect,\n      style: {\n        display: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Upload, {\n      className: \"icon\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upload-text\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"upload-primary\",\n        children: \"Drop files here or click to upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"upload-secondary\",\n        children: \"Supports PDF, DOCX, TXT, CSV, JSON, Images\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n\n// --- Archived Conversations Modal ---\n_s2(FileUpload, \"ICSTOYkc0inD8Xn4CialJ2zzBsY=\");\n_c = FileUpload;\nconst ArchivedConversationsModal = ({\n  isOpen,\n  onClose,\n  conversations,\n  onViewChat,\n  onUnarchive,\n  onDelete\n}) => {\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-overlay\",\n    onClick: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content archived-modal\",\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Archived Chats\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"modal-close\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            className: \"icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"archived-modal-content\",\n        children: conversations.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          children: [/*#__PURE__*/_jsxDEV(Archive, {\n            className: \"empty-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No archived conversations\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Conversations you archive will appear here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"archived-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"archived-table-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"archived-table-col-name\",\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"archived-table-col-date\",\n              children: \"Date created\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"archived-table-col-actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"archived-table-body\",\n            children: conversations.map(conv => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"archived-table-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"archived-table-col-name\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => onViewChat(conv),\n                  className: \"archived-chat-name\",\n                  title: \"Click to view conversation\",\n                  children: conv.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"archived-table-col-date\",\n                children: new Date(conv.createdAt).toLocaleDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"archived-table-col-actions\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => onUnarchive(conv.id),\n                  className: \"archived-icon-btn\",\n                  title: \"Unarchive conversation\",\n                  children: /*#__PURE__*/_jsxDEV(Archive, {\n                    className: \"icon-sm\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => onDelete(conv.id),\n                  className: \"archived-icon-btn danger\",\n                  title: \"Delete conversation\",\n                  children: /*#__PURE__*/_jsxDEV(Trash2, {\n                    className: \"icon-sm\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 144,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 21\n              }, this)]\n            }, conv.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n\n// --- Conversation Dropdown Component ---\n_c2 = ArchivedConversationsModal;\nconst ConversationDropdown = ({\n  conversation,\n  isOpen,\n  onClose,\n  onFavourite,\n  onArchive,\n  onDelete,\n  onRename\n}) => {\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"conversation-dropdown\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: e => {\n        e.stopPropagation();\n        onRename();\n        onClose();\n      },\n      className: \"dropdown-item\",\n      children: [/*#__PURE__*/_jsxDEV(Edit3, {\n        className: \"icon-sm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Rename\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: e => {\n        e.stopPropagation();\n        onFavourite();\n        onClose();\n      },\n      className: \"dropdown-item\",\n      children: [/*#__PURE__*/_jsxDEV(Heart, {\n        className: \"icon-sm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: conversation.isFavourite ? 'Remove from favourites' : 'Add to favourites'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: e => {\n        e.stopPropagation();\n        onArchive();\n        onClose();\n      },\n      className: \"dropdown-item\",\n      children: [/*#__PURE__*/_jsxDEV(Archive, {\n        className: \"icon-sm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Archive\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: e => {\n        e.stopPropagation();\n        onDelete();\n        onClose();\n      },\n      className: \"dropdown-item danger\",\n      children: [/*#__PURE__*/_jsxDEV(Trash2, {\n        className: \"icon-sm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 5\n  }, this);\n};\n\n// --- Utility Components ---\n_c3 = ConversationDropdown;\nconst SkeletonLoader = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"skeleton-container\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"skeleton skeleton-avatar\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 215,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"skeleton-content\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"skeleton skeleton-line long\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"skeleton skeleton-line medium\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"skeleton skeleton-line short\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 216,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 214,\n  columnNumber: 3\n}, this);\n_c4 = SkeletonLoader;\nconst Toast = ({\n  message,\n  type,\n  onClose\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: `toast toast-${type}`,\n  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n    children: message\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 226,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: onClose,\n    className: \"toast-close\",\n    children: /*#__PURE__*/_jsxDEV(X, {\n      className: \"icon-sm\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 227,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 225,\n  columnNumber: 3\n}, this);\n_c5 = Toast;\nconst MessageActions = ({\n  message,\n  onCopy,\n  onEdit,\n  onReact,\n  onRegenerate\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"message-actions\",\n  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"action-btn\",\n    onClick: () => onCopy(message.content),\n    title: \"Copy message\",\n    children: /*#__PURE__*/_jsxDEV(Copy, {\n      className: \"icon-sm\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 235,\n    columnNumber: 5\n  }, this), message.role === 'assistant' && /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"action-btn\",\n      onClick: () => onReact(message.id, 'like'),\n      title: \"Good response\",\n      children: /*#__PURE__*/_jsxDEV(ThumbsUp, {\n        className: \"icon-sm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"action-btn\",\n      onClick: () => onReact(message.id, 'dislike'),\n      title: \"Poor response\",\n      children: /*#__PURE__*/_jsxDEV(ThumbsDown, {\n        className: \"icon-sm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"action-btn\",\n      onClick: () => onRegenerate(message.id),\n      title: \"Regenerate\",\n      children: /*#__PURE__*/_jsxDEV(RotateCcw, {\n        className: \"icon-sm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true), message.role === 'user' && /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"action-btn\",\n    onClick: () => onEdit(message.id),\n    title: \"Edit message\",\n    children: /*#__PURE__*/_jsxDEV(Edit3, {\n      className: \"icon-sm\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 252,\n    columnNumber: 7\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 234,\n  columnNumber: 3\n}, this);\n\n// --- Main App Component ---\n_c6 = MessageActions;\nexport default function App() {\n  _s3();\n  var _pastConversations$fi;\n  // --- State Management ---\n  const [pastConversations, setPastConversations] = useState([]);\n  const [conversationsLoading, setConversationsLoading] = useState(true);\n\n  // --- State Management ---\n  const [testMode, setTestMode] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentConversationId, setCurrentConversationId] = useState(null);\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n  const [isSidebarHidden, setIsSidebarHidden] = useState(true);\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\n  const [isDarkMode, setIsDarkMode] = useLocalStorage('darkMode', true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isSearchFocused, setIsSearchFocused] = useState(false);\n  const [isVoiceMode, setIsVoiceMode] = useState(false);\n  const [toast, setToast] = useState(null);\n  const [editingMessageId, setEditingMessageId] = useState(null);\n  const [editingText, setEditingText] = useState('');\n  const [uploadedFiles, setUploadedFiles] = useState([]);\n  const [showFileUpload, setShowFileUpload] = useState(false);\n  const [showScrollToBottom, setShowScrollToBottom] = useState(false);\n  const [typingMessageId, setTypingMessageId] = useState(null);\n  const [displayedContent, setDisplayedContent] = useState({});\n  const [openDropdownId, setOpenDropdownId] = useState(null);\n  const [renamingConversationId, setRenamingConversationId] = useState(null);\n  const [renamingText, setRenamingText] = useState('');\n  const [showArchivedModal, setShowArchivedModal] = useState(false);\n  const [conversationFilter, setConversationFilter] = useState('all');\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [generationTimeoutId, setGenerationTimeoutId] = useState(null);\n  const [typingTimeoutIds, setTypingTimeoutIds] = useState([]);\n\n  // Load conversations on app start\n  useEffect(() => {\n    const loadConversations = async () => {\n      try {\n        setConversationsLoading(true);\n        const response = await apiService.getConversations();\n        if (response.success) {\n          setPastConversations(response.conversations);\n        }\n      } catch (error) {\n        console.error('Failed to load conversations:', error);\n      } finally {\n        setConversationsLoading(false);\n      }\n    };\n    loadConversations();\n  }, []);\n  const chatEndRef = useRef(null);\n  const inputRef = useRef(null);\n  const chatContainerRef = useRef(null);\n\n  // --- Memoized Values ---\n  const filteredConversations = useMemo(() => {\n    let filtered = pastConversations.filter(conv => !conv.is_archived);\n    if (conversationFilter === 'favourites') {\n      filtered = filtered.filter(conv => conv.is_favourite);\n    }\n    if (searchQuery) {\n      filtered = filtered.filter(conv => {\n        var _conv$messages;\n        return conv.title.toLowerCase().includes(searchQuery.toLowerCase()) || ((_conv$messages = conv.messages) === null || _conv$messages === void 0 ? void 0 : _conv$messages.some(msg => msg.content.toLowerCase().includes(searchQuery.toLowerCase())));\n      });\n    }\n    return filtered.sort((a, b) => {\n      if (a.is_favourite && !b.is_favourite) return -1;\n      if (!a.is_favourite && b.is_favourite) return 1;\n      return new Date(b.created_at) - new Date(a.created_at);\n    });\n  }, [pastConversations, searchQuery, conversationFilter]);\n  const archivedConversations = useMemo(() => {\n    let archived = pastConversations.filter(conv => conv.is_archived);\n    if (searchQuery) {\n      archived = archived.filter(conv => {\n        var _conv$messages2;\n        return conv.title.toLowerCase().includes(searchQuery.toLowerCase()) || ((_conv$messages2 = conv.messages) === null || _conv$messages2 === void 0 ? void 0 : _conv$messages2.some(msg => msg.content.toLowerCase().includes(searchQuery.toLowerCase())));\n      });\n    }\n    return archived.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\n  }, [pastConversations, searchQuery]);\n  const groupConversationsByDate = conversations => {\n    const now = new Date();\n    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n    const lastWeek = new Date(today);\n    lastWeek.setDate(lastWeek.getDate() - 7);\n    const lastMonth = new Date(today);\n    lastMonth.setMonth(lastMonth.getMonth() - 1);\n    const groups = {\n      today: [],\n      yesterday: [],\n      lastWeek: [],\n      lastMonth: [],\n      older: []\n    };\n    conversations.forEach(conv => {\n      const convDate = new Date(conv.created_at);\n      const convDateOnly = new Date(convDate.getFullYear(), convDate.getMonth(), convDate.getDate());\n      if (convDateOnly.getTime() === today.getTime()) {\n        groups.today.push(conv);\n      } else if (convDateOnly.getTime() === yesterday.getTime()) {\n        groups.yesterday.push(conv);\n      } else if (convDate >= lastWeek) {\n        groups.lastWeek.push(conv);\n      } else if (convDate >= lastMonth) {\n        groups.lastMonth.push(conv);\n      } else {\n        groups.older.push(conv);\n      }\n    });\n    return groups;\n  };\n  const conversationGroups = useMemo(() => groupConversationsByDate(filteredConversations), [filteredConversations]);\n\n  // --- Effects ---\n  useEffect(() => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  useEffect(() => {\n    document.documentElement.setAttribute('data-theme', isDarkMode ? 'dark' : 'light');\n  }, [isDarkMode]);\n  useEffect(() => {\n    const handleResize = () => {\n      const mobile = window.innerWidth <= 768;\n      setIsMobile(mobile);\n      if (!mobile && isSidebarOpen) {\n        setIsSidebarOpen(false);\n      }\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [isSidebarOpen]);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (isMobile && isSidebarOpen && !event.target.closest('.sidebar') && !event.target.closest('.sidebar-toggle')) {\n        setIsSidebarOpen(false);\n      }\n      if (openDropdownId && !event.target.closest('.conversation-dropdown') && !event.target.closest('.dropdown-toggle')) {\n        setOpenDropdownId(null);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    document.addEventListener('touchstart', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n      document.removeEventListener('touchstart', handleClickOutside);\n    };\n  }, [isMobile, isSidebarOpen, openDropdownId]);\n  useEffect(() => {\n    const chatContainer = chatContainerRef.current;\n    if (!chatContainer) return;\n    const handleScroll = () => {\n      const {\n        scrollTop,\n        scrollHeight,\n        clientHeight\n      } = chatContainer;\n      const isNearBottom = scrollHeight - scrollTop - clientHeight < 100;\n      setShowScrollToBottom(!isNearBottom && messages.length > 0);\n    };\n    chatContainer.addEventListener('scroll', handleScroll);\n    return () => chatContainer.removeEventListener('scroll', handleScroll);\n  }, [messages.length]);\n\n  // --- Essential Callbacks ---\n  const showToast = useCallback((message, type = 'success') => {\n    setToast({\n      message,\n      type\n    });\n    setTimeout(() => setToast(null), 3000);\n  }, []);\n  const typeMessage = useCallback((messageId, content) => {\n    setTypingMessageId(messageId);\n    setDisplayedContent(prev => ({\n      ...prev,\n      [messageId]: ''\n    }));\n    let currentIndex = 0;\n    const typingSpeed = 8;\n    const timeoutIds = [];\n    const typeChar = () => {\n      if (currentIndex < content.length) {\n        setDisplayedContent(prev => ({\n          ...prev,\n          [messageId]: content.slice(0, currentIndex + 1)\n        }));\n        currentIndex++;\n        const timeoutId = setTimeout(typeChar, typingSpeed);\n        timeoutIds.push(timeoutId);\n        setTypingTimeoutIds(prev => [...prev, timeoutId]);\n      } else {\n        setTypingMessageId(null);\n        setDisplayedContent(prev => ({\n          ...prev,\n          [messageId]: content\n        }));\n        setTypingTimeoutIds(prev => prev.filter(id => !timeoutIds.includes(id)));\n        setIsGenerating(false);\n      }\n    };\n    typeChar();\n  }, []);\n  const regenerateResponse = useCallback(async messageId => {\n    const messageIndex = messages.findIndex(msg => msg.id === messageId);\n    if (messageIndex === -1 || messages[messageIndex].role !== 'assistant') return;\n    let userMessageIndex = messageIndex - 1;\n    while (userMessageIndex >= 0 && messages[userMessageIndex].role !== 'user') {\n      userMessageIndex--;\n    }\n    if (userMessageIndex === -1) return;\n    const userMessage = messages[userMessageIndex];\n    const messagesUpToUser = messages.slice(0, messageIndex);\n    setMessages(messagesUpToUser);\n    setDisplayedContent(prev => {\n      const newContent = {\n        ...prev\n      };\n      delete newContent[messageId];\n      return newContent;\n    });\n    setIsLoading(true);\n    setIsGenerating(true);\n    showToast('Regenerating response...');\n    try {\n      // Call backend API to regenerate response\n      const response = await apiService.regenerateResponse(currentConversationId, userMessage.id);\n      if (response.success) {\n        const newBotResponseId = Date.now().toString();\n        const botMessage = {\n          id: newBotResponseId,\n          role: 'assistant',\n          content: response.aiResponse.content,\n          timestamp: response.aiResponse.timestamp,\n          reaction: null,\n          isEdited: false,\n          model: response.aiResponse.model\n        };\n        const finalMessages = [...messagesUpToUser, botMessage];\n        setMessages(finalMessages);\n        setTimeout(() => {\n          typeMessage(newBotResponseId, response.aiResponse.content);\n        }, 100);\n        showToast('Response regenerated successfully!');\n      } else {\n        throw new Error(response.error || 'Failed to regenerate response');\n      }\n    } catch (error) {\n      console.error(\"Failed to regenerate response:\", error);\n      showToast('Failed to regenerate response. Please try again.', 'error');\n    } finally {\n      setIsLoading(false);\n      setIsGenerating(false);\n      setGenerationTimeoutId(null);\n      setTypingMessageId(null);\n    }\n  }, [messages, currentConversationId, typeMessage, showToast]);\n\n  // --- Helper Functions ---\n  const handleNewChat = () => {\n    var _inputRef$current;\n    setMessages([]);\n    setCurrentConversationId(null);\n    setInput('');\n    setUploadedFiles([]);\n    (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();\n    if (isMobile) {\n      setIsSidebarOpen(false);\n    }\n  };\n  const handleConversationClick = conversation => {\n    if (conversation.is_archived) {\n      showToast('This conversation is archived. Unarchive it first to view.', 'error');\n      return;\n    }\n    setCurrentConversationId(conversation.id);\n    setMessages(conversation.messages || []);\n    if (isMobile) {\n      setIsSidebarOpen(false);\n    }\n  };\n  const toggleSidebar = () => {\n    if (isMobile) {\n      setIsSidebarOpen(!isSidebarOpen);\n      if (!isSidebarOpen) {\n        setIsSidebarHidden(false);\n      }\n    } else {\n      setIsSidebarHidden(!isSidebarHidden);\n      if (isSidebarHidden) {\n        setIsSidebarCollapsed(false);\n      }\n    }\n  };\n  const toggleTheme = () => {\n    setIsDarkMode(!isDarkMode);\n  };\n  const copyToClipboard = text => {\n    navigator.clipboard.writeText(text).then(() => {\n      showToast('Copied to clipboard!');\n    });\n  };\n  const handleFileSelect = files => {\n    const newFiles = files.map(file => ({\n      id: Date.now() + Math.random(),\n      name: file.name,\n      size: file.size,\n      type: file.type,\n      file: file\n    }));\n    setUploadedFiles(prev => [...prev, ...newFiles]);\n    setShowFileUpload(false);\n    showToast(`${files.length} file(s) uploaded successfully!`);\n  };\n  const removeFile = fileId => {\n    setUploadedFiles(prev => prev.filter(f => f.id !== fileId));\n  };\n  const scrollToBottom = () => {\n    var _chatEndRef$current2;\n    (_chatEndRef$current2 = chatEndRef.current) === null || _chatEndRef$current2 === void 0 ? void 0 : _chatEndRef$current2.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const handleMessageReaction = (messageId, reaction) => {\n    setMessages(prev => prev.map(msg => msg.id === messageId ? {\n      ...msg,\n      reaction: msg.reaction === reaction ? null : reaction\n    } : msg));\n    showToast(`Message ${reaction === 'like' ? 'liked' : 'disliked'}!`);\n  };\n  const handleMessageEdit = messageId => {\n    const message = messages.find(msg => msg.id === messageId);\n    if (message) {\n      setEditingMessageId(messageId);\n      setEditingText(message.content);\n    }\n  };\n  const saveMessageEdit = () => {\n    setMessages(prev => prev.map(msg => msg.id === editingMessageId ? {\n      ...msg,\n      content: editingText,\n      isEdited: true\n    } : msg));\n    setEditingMessageId(null);\n    setEditingText('');\n    showToast('Message updated!');\n  };\n  const toggleConversationFavourite = async (convId, e) => {\n    e.stopPropagation();\n    try {\n      const conversation = pastConversations.find(c => c.id === convId);\n      await apiService.updateConversation(convId, {\n        is_favourite: !conversation.is_favourite\n      });\n\n      // Update local state\n      setPastConversations(prev => prev.map(conv => conv.id === convId ? {\n        ...conv,\n        is_favourite: !conv.is_favourite\n      } : conv));\n      showToast(conversation !== null && conversation !== void 0 && conversation.is_favourite ? 'Removed from favourites!' : 'Added to favourites!');\n    } catch (error) {\n      showToast('Failed to update favourite status', 'error');\n    }\n  };\n  const archiveConversation = async (convId, e) => {\n    e.stopPropagation();\n    try {\n      const conversation = pastConversations.find(c => c.id === convId);\n      await apiService.updateConversation(convId, {\n        is_archived: !conversation.is_archived\n      });\n\n      // Update local state\n      setPastConversations(prev => prev.map(conv => conv.id === convId ? {\n        ...conv,\n        is_archived: !conv.is_archived\n      } : conv));\n      if (currentConversationId === convId) {\n        handleNewChat();\n      }\n      showToast('Conversation archived!');\n    } catch (error) {\n      showToast('Failed to archive conversation', 'error');\n    }\n  };\n  const deleteConversation = async (convId, e) => {\n    e.stopPropagation();\n    try {\n      await apiService.deleteConversation(convId);\n\n      // Update local state\n      setPastConversations(prev => prev.filter(conv => conv.id !== convId));\n      if (currentConversationId === convId) {\n        handleNewChat();\n      }\n      showToast('Conversation deleted!');\n    } catch (error) {\n      showToast('Failed to delete conversation', 'error');\n    }\n  };\n  const toggleDropdown = (convId, e) => {\n    e.stopPropagation();\n    setOpenDropdownId(openDropdownId === convId ? null : convId);\n  };\n  const closeDropdown = () => {\n    setOpenDropdownId(null);\n  };\n  const startRenaming = convId => {\n    const conversation = pastConversations.find(c => c.id === convId);\n    if (conversation) {\n      setRenamingConversationId(convId);\n      setRenamingText(conversation.title);\n    }\n  };\n  const saveRename = async () => {\n    if (renamingText.trim()) {\n      try {\n        await apiService.updateConversation(renamingConversationId, {\n          title: renamingText.trim()\n        });\n\n        // Update local state\n        setPastConversations(prev => prev.map(conv => conv.id === renamingConversationId ? {\n          ...conv,\n          title: renamingText.trim()\n        } : conv));\n        showToast('Conversation renamed!');\n      } catch (error) {\n        showToast('Failed to rename conversation', 'error');\n      }\n    }\n    setRenamingConversationId(null);\n    setRenamingText('');\n  };\n  const cancelRename = () => {\n    setRenamingConversationId(null);\n    setRenamingText('');\n  };\n  const viewArchivedChat = conversation => {\n    setCurrentConversationId(conversation.id);\n    setMessages(conversation.messages || []);\n    setShowArchivedModal(false);\n    if (isMobile) {\n      setIsSidebarOpen(false);\n      setIsSidebarHidden(true);\n    }\n  };\n  const unarchiveConversation = async convId => {\n    try {\n      await updateConversation(convId, {\n        is_archived: false\n      });\n      showToast('Conversation unarchived!');\n    } catch (error) {\n      showToast('Failed to unarchive conversation', 'error');\n    }\n  };\n  const deleteArchivedConversation = async convId => {\n    try {\n      await deleteConversationDB(convId);\n      showToast('Conversation deleted!');\n    } catch (error) {\n      showToast('Failed to delete conversation', 'error');\n    }\n  };\n  const handleSubmit = async e => {\n    if (e) e.preventDefault();\n    if (!input.trim() || isLoading || isGenerating) return;\n    const messageText = input.trim();\n    const messageFiles = uploadedFiles.length > 0 ? [...uploadedFiles] : null;\n\n    // Clear input immediately\n    setInput('');\n    setUploadedFiles([]);\n    setIsLoading(true);\n    setIsGenerating(true);\n\n    // Add user message to UI immediately\n    const userMessageId = Date.now().toString();\n    const userMessage = {\n      id: userMessageId,\n      role: 'user',\n      content: messageText,\n      timestamp: new Date().toISOString(),\n      reaction: null,\n      isEdited: false,\n      files: messageFiles\n    };\n    setMessages(prev => [...prev, userMessage]);\n    try {\n      // Call backend API for real AI response\n      const response = await apiService.sendMessage(messageText, currentConversationId, messageFiles);\n      if (response.success) {\n        // Update conversation ID if this was a new conversation\n        if (!currentConversationId && response.conversationId) {\n          setCurrentConversationId(response.conversationId);\n        }\n\n        // Add AI response to UI\n        const botResponseId = Date.now().toString();\n        const botMessage = {\n          id: botResponseId,\n          role: 'assistant',\n          content: response.aiResponse.content,\n          timestamp: response.aiResponse.timestamp,\n          reaction: null,\n          isEdited: false,\n          model: response.aiResponse.model\n        };\n        setMessages(prev => [...prev, botMessage]);\n\n        // Start typing animation\n        setTimeout(() => {\n          typeMessage(botResponseId, response.aiResponse.content);\n        }, 100);\n        showToast('Response generated successfully!');\n      } else {\n        throw new Error(response.error || 'Failed to get AI response');\n      }\n    } catch (error) {\n      console.error(\"Failed to get AI response:\", error);\n\n      // Add error response\n      const errorResponse = {\n        id: Date.now().toString(),\n        role: 'assistant',\n        content: \"I apologize, but I'm having trouble connecting to our AI systems right now. Please try again in a moment, or reach out to your HR representative for immediate assistance.\",\n        timestamp: new Date().toISOString(),\n        reaction: null,\n        isEdited: false\n      };\n      setMessages(prev => [...prev, errorResponse]);\n      showToast('Failed to get AI response. Please try again.', 'error');\n    } finally {\n      setIsLoading(false);\n      setIsGenerating(false);\n      setGenerationTimeoutId(null);\n      setTypingMessageId(null);\n      typingTimeoutIds.forEach(timeoutId => clearTimeout(timeoutId));\n      setTypingTimeoutIds([]);\n    }\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n  const toggleVoiceMode = () => {\n    setIsVoiceMode(!isVoiceMode);\n    if (!isVoiceMode) {\n      showToast('Voice mode activated (demo)');\n    } else {\n      showToast('Voice mode deactivated');\n    }\n  };\n  const stopGeneration = () => {\n    if (generationTimeoutId) {\n      clearTimeout(generationTimeoutId);\n      setGenerationTimeoutId(null);\n    }\n    typingTimeoutIds.forEach(timeoutId => clearTimeout(timeoutId));\n    setTypingTimeoutIds([]);\n    setIsGenerating(false);\n    setIsLoading(false);\n    setTypingMessageId(null);\n    showToast('Generation stopped', 'error');\n  };\n  const getInputButton = () => {\n    if (isGenerating || typingMessageId) {\n      return {\n        icon: Square,\n        onClick: stopGeneration,\n        className: \"stop-button\",\n        title: \"Stop generation\",\n        disabled: false\n      };\n    } else if (input.trim()) {\n      return {\n        icon: ArrowUp,\n        onClick: e => {\n          e.preventDefault();\n          handleSubmit();\n        },\n        className: \"send-button\",\n        title: \"Send message\",\n        disabled: isLoading || isGenerating || typingMessageId\n      };\n    } else {\n      return {\n        icon: isVoiceMode ? MicOff : Mic,\n        onClick: toggleVoiceMode,\n        className: `voice-btn ${isVoiceMode ? 'active' : ''}`,\n        title: \"Voice input\",\n        disabled: isLoading || isGenerating || typingMessageId\n      };\n    }\n  };\n  const renderConversationItem = conv => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `conversation-item ${currentConversationId === conv.id ? 'active' : ''} ${conv.is_favourite ? 'favourite' : ''}`,\n    onClick: () => handleConversationClick(conv),\n    children: [renamingConversationId === conv.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rename-input-container\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: renamingText,\n        onChange: e => setRenamingText(e.target.value),\n        onKeyDown: e => {\n          if (e.key === 'Enter') saveRename();\n          if (e.key === 'Escape') cancelRename();\n        },\n        onBlur: saveRename,\n        autoFocus: true,\n        className: \"rename-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 934,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 933,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"conversation-text\",\n      children: conv.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 948,\n      columnNumber: 9\n    }, this), conv.is_favourite && /*#__PURE__*/_jsxDEV(Heart, {\n      className: \"favourite-icon\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 950,\n      columnNumber: 29\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"conversation-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"dropdown-toggle\",\n        onClick: e => toggleDropdown(conv.id, e),\n        title: \"More options\",\n        children: /*#__PURE__*/_jsxDEV(MoreHorizontal, {\n          className: \"icon-sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 957,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 952,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ConversationDropdown, {\n        conversation: conv,\n        isOpen: openDropdownId === conv.id,\n        onClose: closeDropdown,\n        onFavourite: () => toggleConversationFavourite(conv.id, {\n          stopPropagation: () => {}\n        }),\n        onArchive: () => archiveConversation(conv.id, {\n          stopPropagation: () => {}\n        }),\n        onDelete: () => deleteConversation(conv.id, {\n          stopPropagation: () => {}\n        }),\n        onRename: () => startRenaming(conv.id)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 959,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 951,\n      columnNumber: 7\n    }, this)]\n  }, conv.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 927,\n    columnNumber: 5\n  }, this);\n\n  // If in test mode, show the database test component\n  if (testMode) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setTestMode(false),\n        style: {\n          marginBottom: '20px',\n          padding: '10px 20px',\n          backgroundColor: '#666',\n          color: 'white',\n          border: 'none',\n          borderRadius: '5px'\n        },\n        children: \"\\u2190 Back to Main App\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 976,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DatabaseTest, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 989,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 975,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `app-container ${isDarkMode ? 'dark' : 'light'}`,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setTestMode(true),\n      style: {\n        position: 'fixed',\n        top: '10px',\n        right: '10px',\n        zIndex: 9999,\n        padding: '10px 15px',\n        backgroundColor: '#4CAF50',\n        color: 'white',\n        border: 'none',\n        borderRadius: '5px',\n        fontSize: '12px'\n      },\n      children: \"\\uD83E\\uDDEA Test DB\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 997,\n      columnNumber: 7\n    }, this), conversationsError && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: '60px',\n        right: '10px',\n        zIndex: 9999,\n        padding: '10px 15px',\n        backgroundColor: '#f44336',\n        color: 'white',\n        borderRadius: '5px',\n        fontSize: '12px'\n      },\n      children: [\"Database Error: \", conversationsError]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1017,\n      columnNumber: 9\n    }, this), showFileUpload && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: () => setShowFileUpload(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content file-upload-modal\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Upload Files\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1036,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowFileUpload(false),\n            className: \"modal-close\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1038,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1037,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1035,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FileUpload, {\n          onFileSelect: handleFileSelect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1041,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1034,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1033,\n      columnNumber: 9\n    }, this), toast && /*#__PURE__*/_jsxDEV(Toast, {\n      message: toast.message,\n      type: toast.type,\n      onClose: () => setToast(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1047,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ArchivedConversationsModal, {\n      isOpen: showArchivedModal,\n      onClose: () => setShowArchivedModal(false),\n      conversations: archivedConversations,\n      onViewChat: viewArchivedChat,\n      onUnarchive: unarchiveConversation,\n      onDelete: deleteArchivedConversation\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1054,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `sidebar ${isSidebarCollapsed ? 'collapsed' : ''} ${isSidebarOpen ? 'open' : ''} ${isSidebarHidden ? 'hidden' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sidebar-header\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleNewChat,\n          className: \"new-chat-btn\",\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            className: \"icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1066,\n            columnNumber: 13\n          }, this), !isSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"New chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1067,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1065,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1064,\n        columnNumber: 9\n      }, this), !isSidebarCollapsed && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `search-wrapper ${isSearchFocused ? 'focused' : ''}`,\n            children: [/*#__PURE__*/_jsxDEV(Search, {\n              className: \"search-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1075,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Search chats\",\n              value: searchQuery,\n              onChange: e => setSearchQuery(e.target.value),\n              onFocus: () => setIsSearchFocused(true),\n              onBlur: () => setIsSearchFocused(false),\n              className: \"search-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1076,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1074,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1073,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"conversation-filters\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `filter-btn ${conversationFilter === 'all' ? 'active' : ''}`,\n            onClick: () => setConversationFilter('all'),\n            children: \"All\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1089,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `filter-btn ${conversationFilter === 'favourites' ? 'active' : ''}`,\n            onClick: () => setConversationFilter('favourites'),\n            children: \"Favourites\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1095,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1088,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"conversation-list\",\n          children: conversationsLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '20px',\n              textAlign: 'center',\n              color: '#666'\n            },\n            children: \"Loading conversations...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1105,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [conversationGroups.today.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"conversation-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"group-label\",\n                children: \"Today\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1112,\n                columnNumber: 23\n              }, this), conversationGroups.today.map(renderConversationItem)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1111,\n              columnNumber: 21\n            }, this), conversationGroups.yesterday.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"conversation-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"group-label\",\n                children: \"Yesterday\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1119,\n                columnNumber: 23\n              }, this), conversationGroups.yesterday.map(renderConversationItem)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1118,\n              columnNumber: 21\n            }, this), conversationGroups.lastWeek.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"conversation-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"group-label\",\n                children: \"Previous 7 days\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1126,\n                columnNumber: 23\n              }, this), conversationGroups.lastWeek.map(renderConversationItem)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1125,\n              columnNumber: 21\n            }, this), conversationGroups.lastMonth.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"conversation-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"group-label\",\n                children: \"Previous 30 days\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1133,\n                columnNumber: 23\n              }, this), conversationGroups.lastMonth.map(renderConversationItem)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1132,\n              columnNumber: 21\n            }, this), conversationGroups.older.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"conversation-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"group-label\",\n                children: \"Older\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1140,\n                columnNumber: 23\n              }, this), conversationGroups.older.map(renderConversationItem)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1139,\n              columnNumber: 21\n            }, this), pastConversations.length === 0 && !conversationsLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '20px',\n                textAlign: 'center',\n                color: '#666',\n                fontSize: '14px'\n              },\n              children: [\"No conversations yet.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1152,\n                columnNumber: 44\n              }, this), \"Start a new chat to get started!\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1146,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1103,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sidebar-footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: toggleTheme,\n          className: \"theme-toggle\",\n          children: [isDarkMode ? /*#__PURE__*/_jsxDEV(Sun, {\n            className: \"icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1164,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(Moon, {\n            className: \"icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1164,\n            columnNumber: 54\n          }, this), !isSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"span\", {\n            children: isDarkMode ? 'Light mode' : 'Dark mode'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1165,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowArchivedModal(true),\n          className: \"archive-toggle-btn\",\n          children: [/*#__PURE__*/_jsxDEV(Archive, {\n            className: \"icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1169,\n            columnNumber: 13\n          }, this), !isSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Archived (\", archivedConversations.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1170,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1168,\n          columnNumber: 11\n        }, this), !isSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-section\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '10px',\n              textAlign: 'center',\n              fontSize: '12px',\n              color: '#666',\n              borderTop: '1px solid #eee'\n            },\n            children: \"Single User Mode - No Login Required\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1175,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1174,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1162,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1063,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `main-content ${isSidebarOpen ? 'sidebar-open' : ''} ${isSidebarHidden ? 'sidebar-hidden' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: toggleSidebar,\n          className: \"sidebar-toggle\",\n          children: /*#__PURE__*/_jsxDEV(Sidebar, {\n            className: \"icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1192,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1191,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"chat-title\",\n          children: currentConversationId ? ((_pastConversations$fi = pastConversations.find(c => c.id === currentConversationId)) === null || _pastConversations$fi === void 0 ? void 0 : _pastConversations$fi.title) || 'Chat' : 'Onboarding Assistant'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1194,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1190,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-container\",\n        ref: chatContainerRef,\n        children: messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"welcome-screen\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"welcome-icon\",\n            children: /*#__PURE__*/_jsxDEV(Bot, {\n              size: 48\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1206,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1205,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"welcome-title\",\n            children: \"How can I help you today?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1208,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"welcome-subtitle\",\n            children: \"I'm your onboarding assistant. Ask me anything about company policies, benefits, procedures, or getting started at the company.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1209,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"suggestion-cards\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"suggestion-card\",\n              onClick: () => setInput(\"What are the company's vacation policies?\"),\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\uD83D\\uDCC5 Vacation\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1215,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1214,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"suggestion-card\",\n              onClick: () => setInput(\"How do I set up my IT equipment?\"),\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\uD83D\\uDCBB IT Setup\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1218,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1217,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"suggestion-card\",\n              onClick: () => setInput(\"What benefits do I have access to?\"),\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\uD83C\\uDFE5 Benefits\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1221,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1220,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"suggestion-card\",\n              onClick: () => setInput(\"Who are my team members?\"),\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\uD83D\\uDC65 Team\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1224,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1223,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1213,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1204,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-messages\",\n          children: [messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `message ${msg.role}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-avatar\",\n              children: msg.role === 'user' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"avatar user-avatar-chat\",\n                children: /*#__PURE__*/_jsxDEV(User, {\n                  className: \"icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1235,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1234,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"avatar assistant-avatar\",\n                children: /*#__PURE__*/_jsxDEV(Bot, {\n                  className: \"icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1239,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1238,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1232,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-content\",\n              children: editingMessageId === msg.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: editingText,\n                  onChange: e => setEditingText(e.target.value),\n                  className: \"edit-textarea\",\n                  autoFocus: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1246,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"edit-actions\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: saveMessageEdit,\n                    className: \"edit-save\",\n                    children: [/*#__PURE__*/_jsxDEV(Check, {\n                      className: \"icon-sm\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1254,\n                      columnNumber: 29\n                    }, this), \" Save\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1253,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => setEditingMessageId(null),\n                    className: \"edit-cancel\",\n                    children: [/*#__PURE__*/_jsxDEV(X, {\n                      className: \"icon-sm\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1257,\n                      columnNumber: 29\n                    }, this), \" Cancel\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1256,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1252,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1245,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"message-text\",\n                  children: [msg.role === 'assistant' && displayedContent[msg.id] !== undefined ? displayedContent[msg.id] : msg.content, typingMessageId === msg.id && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"typing-cursor\",\n                    children: \"|\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1268,\n                    columnNumber: 29\n                  }, this), msg.isEdited && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"edited-indicator\",\n                    children: \"(edited)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1270,\n                    columnNumber: 44\n                  }, this), msg.reaction && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `reaction ${msg.reaction}`,\n                    children: msg.reaction === 'like' ? '' : ''\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1272,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1263,\n                  columnNumber: 25\n                }, this), msg.files && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"message-files\",\n                  children: msg.files.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"file-attachment\",\n                    children: [/*#__PURE__*/_jsxDEV(FileText, {\n                      className: \"icon-sm\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1282,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: file.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1283,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"file-size\",\n                      children: [\"(\", (file.size / 1024).toFixed(1), \" KB)\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1284,\n                      columnNumber: 33\n                    }, this)]\n                  }, file.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1281,\n                    columnNumber: 31\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1279,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"message-meta\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"message-time\",\n                    children: new Date(msg.timestamp).toLocaleTimeString([], {\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1291,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(MessageActions, {\n                    message: msg,\n                    onCopy: copyToClipboard,\n                    onEdit: handleMessageEdit,\n                    onReact: handleMessageReaction,\n                    onRegenerate: regenerateResponse\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1294,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1290,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1243,\n              columnNumber: 19\n            }, this)]\n          }, msg.id || index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1231,\n            columnNumber: 17\n          }, this)), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message assistant\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-avatar\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"avatar assistant-avatar\",\n                children: /*#__PURE__*/_jsxDEV(Bot, {\n                  className: \"icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1312,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1311,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1310,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-content\",\n              children: /*#__PURE__*/_jsxDEV(SkeletonLoader, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1316,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1315,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1309,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: chatEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1321,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1229,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-section\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-container\",\n          children: [showScrollToBottom && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: scrollToBottom,\n            className: `scroll-to-bottom ${showScrollToBottom ? 'visible' : ''}`,\n            title: \"Scroll to bottom\",\n            children: /*#__PURE__*/_jsxDEV(ArrowUp, {\n              className: \"icon\",\n              style: {\n                transform: 'rotate(180deg)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1334,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1329,\n            columnNumber: 15\n          }, this), uploadedFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"uploaded-files\",\n            children: uploadedFiles.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"uploaded-file\",\n              children: [/*#__PURE__*/_jsxDEV(FileText, {\n                className: \"icon-sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1342,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: file.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1343,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeFile(file.id),\n                className: \"remove-file\",\n                children: /*#__PURE__*/_jsxDEV(X, {\n                  className: \"icon-sm\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1348,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1344,\n                columnNumber: 21\n              }, this)]\n            }, file.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1341,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1339,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-actions-left\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => setShowFileUpload(true),\n                  className: \"file-btn\",\n                  title: \"Upload files\",\n                  children: /*#__PURE__*/_jsxDEV(Paperclip, {\n                    className: \"icon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1364,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1358,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1357,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                ref: inputRef,\n                value: input,\n                onChange: e => setInput(e.target.value),\n                onKeyDown: handleKeyDown,\n                placeholder: isGenerating || typingMessageId ? \"Generating response...\" : \"Message ChatGPT...\",\n                className: \"message-input\",\n                rows: 1,\n                disabled: isGenerating || typingMessageId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1368,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-actions-right\",\n                children: (() => {\n                  const buttonConfig = getInputButton();\n                  const IconComponent = buttonConfig.icon;\n                  return /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: buttonConfig.className === \"send-button\" ? \"submit\" : \"button\",\n                    onClick: buttonConfig.className === \"send-button\" ? undefined : buttonConfig.onClick,\n                    disabled: buttonConfig.disabled,\n                    className: buttonConfig.className,\n                    title: buttonConfig.title,\n                    children: /*#__PURE__*/_jsxDEV(IconComponent, {\n                      className: \"icon\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1391,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1384,\n                    columnNumber: 23\n                  }, this);\n                })()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1379,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1356,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1355,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-footer\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"ChatGPT can make mistakes. Check important info.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1399,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1398,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1327,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1326,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1189,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 995,\n    columnNumber: 5\n  }, this);\n}\n_s3(App, \"r4e3Z6gDlGI/+gmWLThI7eT2wiQ=\", false, function () {\n  return [useLocalStorage];\n});\n_c7 = App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"FileUpload\");\n$RefreshReg$(_c2, \"ArchivedConversationsModal\");\n$RefreshReg$(_c3, \"ConversationDropdown\");\n$RefreshReg$(_c4, \"SkeletonLoader\");\n$RefreshReg$(_c5, \"Toast\");\n$RefreshReg$(_c6, \"MessageActions\");\n$RefreshReg$(_c7, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useMemo","Plus","ArrowUp","User","Bot","Sun","Moon","Edit3","Trash2","Search","Copy","Mic","MicOff","Heart","Archive","Sidebar","ThumbsUp","ThumbsDown","RotateCcw","X","Check","Upload","FileText","Paperclip","MoreHorizontal","Square","apiService","jsxDEV","_jsxDEV","Fragment","_Fragment","useLocalStorage","key","initialValue","_s","storedValue","setStoredValue","item","window","localStorage","getItem","JSON","parse","error","setValue","value","setItem","stringify","console","FileUpload","onFileSelect","acceptedTypes","_s2","isDragging","setIsDragging","fileInputRef","handleDrop","e","preventDefault","files","Array","from","dataTransfer","handleDragOver","handleDragLeave","handleFileSelect","target","className","onDrop","onDragOver","onDragLeave","onClick","_fileInputRef$current","current","click","children","ref","type","multiple","accept","onChange","style","display","fileName","_jsxFileName","lineNumber","columnNumber","_c","ArchivedConversationsModal","isOpen","onClose","conversations","onViewChat","onUnarchive","onDelete","stopPropagation","length","map","conv","title","Date","createdAt","toLocaleDateString","id","_c2","ConversationDropdown","conversation","onFavourite","onArchive","onRename","isFavourite","_c3","SkeletonLoader","_c4","Toast","message","_c5","MessageActions","onCopy","onEdit","onReact","onRegenerate","content","role","_c6","App","_s3","_pastConversations$fi","pastConversations","setPastConversations","conversationsLoading","setConversationsLoading","testMode","setTestMode","messages","setMessages","input","setInput","isLoading","setIsLoading","currentConversationId","setCurrentConversationId","isSidebarCollapsed","setIsSidebarCollapsed","isSidebarOpen","setIsSidebarOpen","isSidebarHidden","setIsSidebarHidden","isMobile","setIsMobile","innerWidth","isDarkMode","setIsDarkMode","searchQuery","setSearchQuery","isSearchFocused","setIsSearchFocused","isVoiceMode","setIsVoiceMode","toast","setToast","editingMessageId","setEditingMessageId","editingText","setEditingText","uploadedFiles","setUploadedFiles","showFileUpload","setShowFileUpload","showScrollToBottom","setShowScrollToBottom","typingMessageId","setTypingMessageId","displayedContent","setDisplayedContent","openDropdownId","setOpenDropdownId","renamingConversationId","setRenamingConversationId","renamingText","setRenamingText","showArchivedModal","setShowArchivedModal","conversationFilter","setConversationFilter","isGenerating","setIsGenerating","generationTimeoutId","setGenerationTimeoutId","typingTimeoutIds","setTypingTimeoutIds","loadConversations","response","getConversations","success","chatEndRef","inputRef","chatContainerRef","filteredConversations","filtered","filter","is_archived","is_favourite","_conv$messages","toLowerCase","includes","some","msg","sort","a","b","created_at","archivedConversations","archived","_conv$messages2","groupConversationsByDate","now","today","getFullYear","getMonth","getDate","yesterday","setDate","lastWeek","lastMonth","setMonth","groups","older","forEach","convDate","convDateOnly","getTime","push","conversationGroups","_chatEndRef$current","scrollIntoView","behavior","document","documentElement","setAttribute","handleResize","mobile","addEventListener","removeEventListener","handleClickOutside","event","closest","chatContainer","handleScroll","scrollTop","scrollHeight","clientHeight","isNearBottom","showToast","setTimeout","typeMessage","messageId","prev","currentIndex","typingSpeed","timeoutIds","typeChar","slice","timeoutId","regenerateResponse","messageIndex","findIndex","userMessageIndex","userMessage","messagesUpToUser","newContent","newBotResponseId","toString","botMessage","aiResponse","timestamp","reaction","isEdited","model","finalMessages","Error","handleNewChat","_inputRef$current","focus","handleConversationClick","toggleSidebar","toggleTheme","copyToClipboard","text","navigator","clipboard","writeText","then","newFiles","file","Math","random","name","size","removeFile","fileId","f","scrollToBottom","_chatEndRef$current2","handleMessageReaction","handleMessageEdit","find","saveMessageEdit","toggleConversationFavourite","convId","c","updateConversation","archiveConversation","deleteConversation","toggleDropdown","closeDropdown","startRenaming","saveRename","trim","cancelRename","viewArchivedChat","unarchiveConversation","deleteArchivedConversation","deleteConversationDB","handleSubmit","messageText","messageFiles","userMessageId","toISOString","sendMessage","conversationId","botResponseId","errorResponse","clearTimeout","handleKeyDown","shiftKey","toggleVoiceMode","stopGeneration","getInputButton","icon","disabled","renderConversationItem","onKeyDown","onBlur","autoFocus","padding","marginBottom","backgroundColor","color","border","borderRadius","DatabaseTest","position","top","right","zIndex","fontSize","conversationsError","placeholder","onFocus","textAlign","borderTop","index","undefined","toFixed","toLocaleTimeString","hour","minute","transform","onSubmit","rows","buttonConfig","IconComponent","_c7","$RefreshReg$"],"sources":["/Users/marwan.zenhom/Desktop/onboarding-chat/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { \n  Plus, ArrowUp, User, Bot, Sun, Moon, \n  Edit3, Trash2, Search, Copy, Mic, MicOff, \n  Heart, Archive, Sidebar,\n  ThumbsUp, ThumbsDown, RotateCcw, X, Check, Upload, \n  FileText, Paperclip, MoreHorizontal, Square\n} from 'lucide-react';\nimport apiService from './services/apiService';\n\n// --- Custom Hooks ---\nconst useLocalStorage = (key, initialValue) => {\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      const item = window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      return initialValue;\n    }\n  });\n\n  const setValue = (value) => {\n    try {\n      setStoredValue(value);\n      window.localStorage.setItem(key, JSON.stringify(value));\n    } catch (error) {\n      console.error('Error saving to localStorage:', error);\n    }\n  };\n\n  return [storedValue, setValue];\n};\n\n\n\n\n\n// --- File Upload Component ---\nconst FileUpload = ({ onFileSelect, acceptedTypes = \".pdf,.docx,.txt,.csv,.json,.png,.jpg,.jpeg\" }) => {\n  const [isDragging, setIsDragging] = useState(false);\n  const fileInputRef = useRef(null);\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    setIsDragging(false);\n    const files = Array.from(e.dataTransfer.files);\n    onFileSelect(files);\n  };\n\n  const handleDragOver = (e) => {\n    e.preventDefault();\n    setIsDragging(true);\n  };\n\n  const handleDragLeave = () => {\n    setIsDragging(false);\n  };\n\n  const handleFileSelect = (e) => {\n    const files = Array.from(e.target.files);\n    onFileSelect(files);\n  };\n\n  return (\n    <div\n      className={`file-upload-area ${isDragging ? 'dragging' : ''}`}\n      onDrop={handleDrop}\n      onDragOver={handleDragOver}\n      onDragLeave={handleDragLeave}\n      onClick={() => fileInputRef.current?.click()}\n    >\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        multiple\n        accept={acceptedTypes}\n        onChange={handleFileSelect}\n        style={{ display: 'none' }}\n      />\n      <Upload className=\"icon\" />\n      <div className=\"upload-text\">\n        <span className=\"upload-primary\">Drop files here or click to upload</span>\n        <span className=\"upload-secondary\">Supports PDF, DOCX, TXT, CSV, JSON, Images</span>\n      </div>\n    </div>\n  );\n};\n\n// --- Archived Conversations Modal ---\nconst ArchivedConversationsModal = ({ isOpen, onClose, conversations, onViewChat, onUnarchive, onDelete }) => {\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content archived-modal\" onClick={e => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>Archived Chats</h2>\n          <button onClick={onClose} className=\"modal-close\">\n            <X className=\"icon\" />\n          </button>\n        </div>\n        <div className=\"archived-modal-content\">\n          {conversations.length === 0 ? (\n            <div className=\"empty-state\">\n              <Archive className=\"empty-icon\" />\n              <p>No archived conversations</p>\n              <span>Conversations you archive will appear here</span>\n            </div>\n          ) : (\n            <div className=\"archived-table\">\n              <div className=\"archived-table-header\">\n                <div className=\"archived-table-col-name\">Name</div>\n                <div className=\"archived-table-col-date\">Date created</div>\n                <div className=\"archived-table-col-actions\"></div>\n              </div>\n              <div className=\"archived-table-body\">\n                {conversations.map(conv => (\n                  <div key={conv.id} className=\"archived-table-row\">\n                    <div className=\"archived-table-col-name\">\n                      <button\n                        onClick={() => onViewChat(conv)}\n                        className=\"archived-chat-name\"\n                        title=\"Click to view conversation\"\n                      >\n                        {conv.title}\n                      </button>\n                    </div>\n                    <div className=\"archived-table-col-date\">\n                      {new Date(conv.createdAt).toLocaleDateString()}\n                    </div>\n                    <div className=\"archived-table-col-actions\">\n                      <button\n                        onClick={() => onUnarchive(conv.id)}\n                        className=\"archived-icon-btn\"\n                        title=\"Unarchive conversation\"\n                      >\n                        <Archive className=\"icon-sm\" />\n                      </button>\n                      <button\n                        onClick={() => onDelete(conv.id)}\n                        className=\"archived-icon-btn danger\"\n                        title=\"Delete conversation\"\n                      >\n                        <Trash2 className=\"icon-sm\" />\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// --- Conversation Dropdown Component ---\nconst ConversationDropdown = ({ conversation, isOpen, onClose, onFavourite, onArchive, onDelete, onRename }) => {\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"conversation-dropdown\">\n      <button\n        onClick={(e) => {\n          e.stopPropagation();\n          onRename();\n          onClose();\n        }}\n        className=\"dropdown-item\"\n      >\n        <Edit3 className=\"icon-sm\" />\n        <span>Rename</span>\n      </button>\n      <button\n        onClick={(e) => {\n          e.stopPropagation();\n          onFavourite();\n          onClose();\n        }}\n        className=\"dropdown-item\"\n      >\n        <Heart className=\"icon-sm\" />\n        <span>{conversation.isFavourite ? 'Remove from favourites' : 'Add to favourites'}</span>\n      </button>\n      <button\n        onClick={(e) => {\n          e.stopPropagation();\n          onArchive();\n          onClose();\n        }}\n        className=\"dropdown-item\"\n      >\n        <Archive className=\"icon-sm\" />\n        <span>Archive</span>\n      </button>\n      <button\n        onClick={(e) => {\n          e.stopPropagation();\n          onDelete();\n          onClose();\n        }}\n        className=\"dropdown-item danger\"\n      >\n        <Trash2 className=\"icon-sm\" />\n        <span>Delete</span>\n      </button>\n    </div>\n  );\n};\n\n// --- Utility Components ---\nconst SkeletonLoader = () => (\n  <div className=\"skeleton-container\">\n    <div className=\"skeleton skeleton-avatar\"></div>\n    <div className=\"skeleton-content\">\n      <div className=\"skeleton skeleton-line long\"></div>\n      <div className=\"skeleton skeleton-line medium\"></div>\n      <div className=\"skeleton skeleton-line short\"></div>\n    </div>\n  </div>\n);\n\nconst Toast = ({ message, type, onClose }) => (\n  <div className={`toast toast-${type}`}>\n    <span>{message}</span>\n    <button onClick={onClose} className=\"toast-close\">\n      <X className=\"icon-sm\" />\n    </button>\n  </div>\n);\n\nconst MessageActions = ({ message, onCopy, onEdit, onReact, onRegenerate }) => (\n  <div className=\"message-actions\">\n    <button className=\"action-btn\" onClick={() => onCopy(message.content)} title=\"Copy message\">\n      <Copy className=\"icon-sm\" />\n    </button>\n    {message.role === 'assistant' && (\n      <>\n        <button className=\"action-btn\" onClick={() => onReact(message.id, 'like')} title=\"Good response\">\n          <ThumbsUp className=\"icon-sm\" />\n        </button>\n        <button className=\"action-btn\" onClick={() => onReact(message.id, 'dislike')} title=\"Poor response\">\n          <ThumbsDown className=\"icon-sm\" />\n        </button>\n        <button className=\"action-btn\" onClick={() => onRegenerate(message.id)} title=\"Regenerate\">\n          <RotateCcw className=\"icon-sm\" />\n        </button>\n      </>\n    )}\n    {message.role === 'user' && (\n      <button className=\"action-btn\" onClick={() => onEdit(message.id)} title=\"Edit message\">\n        <Edit3 className=\"icon-sm\" />\n      </button>\n    )}\n  </div>\n);\n\n// --- Main App Component ---\nexport default function App() {\n  // --- State Management ---\n  const [pastConversations, setPastConversations] = useState([]);\n  const [conversationsLoading, setConversationsLoading] = useState(true);\n\n  // --- State Management ---\n  const [testMode, setTestMode] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentConversationId, setCurrentConversationId] = useState(null);\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n  const [isSidebarHidden, setIsSidebarHidden] = useState(true);\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\n  const [isDarkMode, setIsDarkMode] = useLocalStorage('darkMode', true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isSearchFocused, setIsSearchFocused] = useState(false);\n  const [isVoiceMode, setIsVoiceMode] = useState(false);\n  const [toast, setToast] = useState(null);\n  const [editingMessageId, setEditingMessageId] = useState(null);\n  const [editingText, setEditingText] = useState('');\n  const [uploadedFiles, setUploadedFiles] = useState([]);\n  const [showFileUpload, setShowFileUpload] = useState(false);\n  const [showScrollToBottom, setShowScrollToBottom] = useState(false);\n  const [typingMessageId, setTypingMessageId] = useState(null);\n  const [displayedContent, setDisplayedContent] = useState({});\n  const [openDropdownId, setOpenDropdownId] = useState(null);\n  const [renamingConversationId, setRenamingConversationId] = useState(null);\n  const [renamingText, setRenamingText] = useState('');\n  const [showArchivedModal, setShowArchivedModal] = useState(false);\n  const [conversationFilter, setConversationFilter] = useState('all');\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [generationTimeoutId, setGenerationTimeoutId] = useState(null);\n  const [typingTimeoutIds, setTypingTimeoutIds] = useState([]);\n\n  // Load conversations on app start\n  useEffect(() => {\n    const loadConversations = async () => {\n      try {\n        setConversationsLoading(true);\n        const response = await apiService.getConversations();\n        if (response.success) {\n          setPastConversations(response.conversations);\n        }\n      } catch (error) {\n        console.error('Failed to load conversations:', error);\n      } finally {\n        setConversationsLoading(false);\n      }\n    };\n\n    loadConversations();\n  }, []);\n\n  const chatEndRef = useRef(null);\n  const inputRef = useRef(null);\n  const chatContainerRef = useRef(null);\n\n  // --- Memoized Values ---\n  const filteredConversations = useMemo(() => {\n    let filtered = pastConversations.filter(conv => !conv.is_archived);\n    \n    if (conversationFilter === 'favourites') {\n      filtered = filtered.filter(conv => conv.is_favourite);\n    }\n    \n    if (searchQuery) {\n      filtered = filtered.filter(conv => \n        conv.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        conv.messages?.some(msg => msg.content.toLowerCase().includes(searchQuery.toLowerCase()))\n      );\n    }\n    \n    return filtered.sort((a, b) => {\n      if (a.is_favourite && !b.is_favourite) return -1;\n      if (!a.is_favourite && b.is_favourite) return 1;\n      return new Date(b.created_at) - new Date(a.created_at);\n    });\n  }, [pastConversations, searchQuery, conversationFilter]);\n\n  const archivedConversations = useMemo(() => {\n    let archived = pastConversations.filter(conv => conv.is_archived);\n    \n    if (searchQuery) {\n      archived = archived.filter(conv => \n        conv.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        conv.messages?.some(msg => msg.content.toLowerCase().includes(searchQuery.toLowerCase()))\n      );\n    }\n    \n    return archived.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\n  }, [pastConversations, searchQuery]);\n\n  const groupConversationsByDate = (conversations) => {\n    const now = new Date();\n    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n    const lastWeek = new Date(today);\n    lastWeek.setDate(lastWeek.getDate() - 7);\n    const lastMonth = new Date(today);\n    lastMonth.setMonth(lastMonth.getMonth() - 1);\n\n    const groups = {\n      today: [],\n      yesterday: [],\n      lastWeek: [],\n      lastMonth: [],\n      older: []\n    };\n\n    conversations.forEach(conv => {\n      const convDate = new Date(conv.created_at);\n      const convDateOnly = new Date(convDate.getFullYear(), convDate.getMonth(), convDate.getDate());\n      \n      if (convDateOnly.getTime() === today.getTime()) {\n        groups.today.push(conv);\n      } else if (convDateOnly.getTime() === yesterday.getTime()) {\n        groups.yesterday.push(conv);\n      } else if (convDate >= lastWeek) {\n        groups.lastWeek.push(conv);\n      } else if (convDate >= lastMonth) {\n        groups.lastMonth.push(conv);\n      } else {\n        groups.older.push(conv);\n      }\n    });\n\n    return groups;\n  };\n\n  const conversationGroups = useMemo(() => groupConversationsByDate(filteredConversations), [filteredConversations]);\n\n  // --- Effects ---\n  useEffect(() => {\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  useEffect(() => {\n    document.documentElement.setAttribute('data-theme', isDarkMode ? 'dark' : 'light');\n  }, [isDarkMode]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      const mobile = window.innerWidth <= 768;\n      setIsMobile(mobile);\n      \n      if (!mobile && isSidebarOpen) {\n        setIsSidebarOpen(false);\n      }\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [isSidebarOpen]);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (isMobile && isSidebarOpen && !event.target.closest('.sidebar') && !event.target.closest('.sidebar-toggle')) {\n        setIsSidebarOpen(false);\n      }\n      if (openDropdownId && !event.target.closest('.conversation-dropdown') && !event.target.closest('.dropdown-toggle')) {\n        setOpenDropdownId(null);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    document.addEventListener('touchstart', handleClickOutside);\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n      document.removeEventListener('touchstart', handleClickOutside);\n    };\n  }, [isMobile, isSidebarOpen, openDropdownId]);\n\n  useEffect(() => {\n    const chatContainer = chatContainerRef.current;\n    if (!chatContainer) return;\n\n    const handleScroll = () => {\n      const { scrollTop, scrollHeight, clientHeight } = chatContainer;\n      const isNearBottom = scrollHeight - scrollTop - clientHeight < 100;\n      setShowScrollToBottom(!isNearBottom && messages.length > 0);\n    };\n\n    chatContainer.addEventListener('scroll', handleScroll);\n    return () => chatContainer.removeEventListener('scroll', handleScroll);\n  }, [messages.length]);\n\n  // --- Essential Callbacks ---\n  const showToast = useCallback((message, type = 'success') => {\n    setToast({ message, type });\n    setTimeout(() => setToast(null), 3000);\n  }, []);\n\n  const typeMessage = useCallback((messageId, content) => {\n    setTypingMessageId(messageId);\n    setDisplayedContent(prev => ({ ...prev, [messageId]: '' }));\n    \n    let currentIndex = 0;\n    const typingSpeed = 8;\n    const timeoutIds = [];\n    \n    const typeChar = () => {\n      if (currentIndex < content.length) {\n        setDisplayedContent(prev => ({\n          ...prev,\n          [messageId]: content.slice(0, currentIndex + 1)\n        }));\n        currentIndex++;\n        const timeoutId = setTimeout(typeChar, typingSpeed);\n        timeoutIds.push(timeoutId);\n        setTypingTimeoutIds(prev => [...prev, timeoutId]);\n      } else {\n        setTypingMessageId(null);\n        setDisplayedContent(prev => ({ ...prev, [messageId]: content }));\n        setTypingTimeoutIds(prev => prev.filter(id => !timeoutIds.includes(id)));\n        setIsGenerating(false);\n      }\n    };\n    \n    typeChar();\n  }, []);\n\n  const regenerateResponse = useCallback(async (messageId) => {\n    const messageIndex = messages.findIndex(msg => msg.id === messageId);\n    if (messageIndex === -1 || messages[messageIndex].role !== 'assistant') return;\n    \n    let userMessageIndex = messageIndex - 1;\n    while (userMessageIndex >= 0 && messages[userMessageIndex].role !== 'user') {\n      userMessageIndex--;\n    }\n    \n    if (userMessageIndex === -1) return;\n    \n    const userMessage = messages[userMessageIndex];\n    const messagesUpToUser = messages.slice(0, messageIndex);\n    setMessages(messagesUpToUser);\n    \n    setDisplayedContent(prev => {\n      const newContent = { ...prev };\n      delete newContent[messageId];\n      return newContent;\n    });\n    \n    setIsLoading(true);\n    setIsGenerating(true);\n    showToast('Regenerating response...');\n\n    try {\n      // Call backend API to regenerate response\n      const response = await apiService.regenerateResponse(currentConversationId, userMessage.id);\n      \n      if (response.success) {\n        const newBotResponseId = Date.now().toString();\n        const botMessage = {\n          id: newBotResponseId,\n          role: 'assistant',\n          content: response.aiResponse.content,\n          timestamp: response.aiResponse.timestamp,\n          reaction: null,\n          isEdited: false,\n          model: response.aiResponse.model\n        };\n        \n        const finalMessages = [...messagesUpToUser, botMessage];\n        setMessages(finalMessages);\n        \n        setTimeout(() => {\n          typeMessage(newBotResponseId, response.aiResponse.content);\n        }, 100);\n        \n        showToast('Response regenerated successfully!');\n      } else {\n        throw new Error(response.error || 'Failed to regenerate response');\n      }\n\n    } catch (error) {\n      console.error(\"Failed to regenerate response:\", error);\n      showToast('Failed to regenerate response. Please try again.', 'error');\n    } finally {\n      setIsLoading(false);\n      setIsGenerating(false);\n      setGenerationTimeoutId(null);\n      setTypingMessageId(null);\n    }\n  }, [messages, currentConversationId, typeMessage, showToast]);\n\n  // --- Helper Functions ---\n  const handleNewChat = () => {\n    setMessages([]);\n    setCurrentConversationId(null);\n    setInput('');\n    setUploadedFiles([]);\n    inputRef.current?.focus();\n    if (isMobile) {\n      setIsSidebarOpen(false);\n    }\n  };\n\n\n\n  const handleConversationClick = (conversation) => {\n    if (conversation.is_archived) {\n      showToast('This conversation is archived. Unarchive it first to view.', 'error');\n      return;\n    }\n    setCurrentConversationId(conversation.id);\n    setMessages(conversation.messages || []);\n    if (isMobile) {\n      setIsSidebarOpen(false);\n    }\n  };\n\n  const toggleSidebar = () => {\n    if (isMobile) {\n      setIsSidebarOpen(!isSidebarOpen);\n      if (!isSidebarOpen) {\n        setIsSidebarHidden(false);\n      }\n    } else {\n      setIsSidebarHidden(!isSidebarHidden);\n      if (isSidebarHidden) {\n        setIsSidebarCollapsed(false);\n      }\n    }\n  };\n\n  const toggleTheme = () => {\n    setIsDarkMode(!isDarkMode);\n  };\n\n  const copyToClipboard = (text) => {\n    navigator.clipboard.writeText(text).then(() => {\n      showToast('Copied to clipboard!');\n    });\n  };\n\n  const handleFileSelect = (files) => {\n    const newFiles = files.map(file => ({\n      id: Date.now() + Math.random(),\n      name: file.name,\n      size: file.size,\n      type: file.type,\n      file: file\n    }));\n    setUploadedFiles(prev => [...prev, ...newFiles]);\n    setShowFileUpload(false);\n    showToast(`${files.length} file(s) uploaded successfully!`);\n  };\n\n  const removeFile = (fileId) => {\n    setUploadedFiles(prev => prev.filter(f => f.id !== fileId));\n  };\n\n  const scrollToBottom = () => {\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const handleMessageReaction = (messageId, reaction) => {\n    setMessages(prev => prev.map(msg => \n      msg.id === messageId \n        ? { ...msg, reaction: msg.reaction === reaction ? null : reaction }\n        : msg\n    ));\n    showToast(`Message ${reaction === 'like' ? 'liked' : 'disliked'}!`);\n  };\n\n  const handleMessageEdit = (messageId) => {\n    const message = messages.find(msg => msg.id === messageId);\n    if (message) {\n      setEditingMessageId(messageId);\n      setEditingText(message.content);\n    }\n  };\n\n  const saveMessageEdit = () => {\n    setMessages(prev => prev.map(msg => \n      msg.id === editingMessageId \n        ? { ...msg, content: editingText, isEdited: true }\n        : msg\n    ));\n    setEditingMessageId(null);\n    setEditingText('');\n    showToast('Message updated!');\n  };\n\n  const toggleConversationFavourite = async (convId, e) => {\n    e.stopPropagation();\n    try {\n      const conversation = pastConversations.find(c => c.id === convId);\n      await apiService.updateConversation(convId, { is_favourite: !conversation.is_favourite });\n      \n      // Update local state\n      setPastConversations(prev => prev.map(conv => \n        conv.id === convId \n          ? { ...conv, is_favourite: !conv.is_favourite }\n          : conv\n      ));\n      \n      showToast(conversation?.is_favourite ? 'Removed from favourites!' : 'Added to favourites!');\n    } catch (error) {\n      showToast('Failed to update favourite status', 'error');\n    }\n  };\n\n  const archiveConversation = async (convId, e) => {\n    e.stopPropagation();\n    try {\n      const conversation = pastConversations.find(c => c.id === convId);\n      await apiService.updateConversation(convId, { is_archived: !conversation.is_archived });\n      \n      // Update local state\n      setPastConversations(prev => prev.map(conv => \n        conv.id === convId \n          ? { ...conv, is_archived: !conv.is_archived }\n          : conv\n      ));\n      \n      if (currentConversationId === convId) {\n        handleNewChat();\n      }\n      showToast('Conversation archived!');\n    } catch (error) {\n      showToast('Failed to archive conversation', 'error');\n    }\n  };\n\n  const deleteConversation = async (convId, e) => {\n    e.stopPropagation();\n    try {\n      await apiService.deleteConversation(convId);\n      \n      // Update local state\n      setPastConversations(prev => prev.filter(conv => conv.id !== convId));\n      \n      if (currentConversationId === convId) {\n        handleNewChat();\n      }\n      showToast('Conversation deleted!');\n    } catch (error) {\n      showToast('Failed to delete conversation', 'error');\n    }\n  };\n\n  const toggleDropdown = (convId, e) => {\n    e.stopPropagation();\n    setOpenDropdownId(openDropdownId === convId ? null : convId);\n  };\n\n  const closeDropdown = () => {\n    setOpenDropdownId(null);\n  };\n\n  const startRenaming = (convId) => {\n    const conversation = pastConversations.find(c => c.id === convId);\n    if (conversation) {\n      setRenamingConversationId(convId);\n      setRenamingText(conversation.title);\n    }\n  };\n\n  const saveRename = async () => {\n    if (renamingText.trim()) {\n      try {\n        await apiService.updateConversation(renamingConversationId, { title: renamingText.trim() });\n        \n        // Update local state\n        setPastConversations(prev => prev.map(conv => \n          conv.id === renamingConversationId \n            ? { ...conv, title: renamingText.trim() }\n            : conv\n        ));\n        \n        showToast('Conversation renamed!');\n      } catch (error) {\n        showToast('Failed to rename conversation', 'error');\n      }\n    }\n    setRenamingConversationId(null);\n    setRenamingText('');\n  };\n\n  const cancelRename = () => {\n    setRenamingConversationId(null);\n    setRenamingText('');\n  };\n\n  const viewArchivedChat = (conversation) => {\n    setCurrentConversationId(conversation.id);\n    setMessages(conversation.messages || []);\n    setShowArchivedModal(false);\n    if (isMobile) {\n      setIsSidebarOpen(false);\n      setIsSidebarHidden(true);\n    }\n  };\n\n  const unarchiveConversation = async (convId) => {\n    try {\n      await updateConversation(convId, { is_archived: false });\n      showToast('Conversation unarchived!');\n    } catch (error) {\n      showToast('Failed to unarchive conversation', 'error');\n    }\n  };\n\n  const deleteArchivedConversation = async (convId) => {\n    try {\n      await deleteConversationDB(convId);\n      showToast('Conversation deleted!');\n    } catch (error) {\n      showToast('Failed to delete conversation', 'error');\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    if (e) e.preventDefault();\n    if (!input.trim() || isLoading || isGenerating) return;\n\n    const messageText = input.trim();\n    const messageFiles = uploadedFiles.length > 0 ? [...uploadedFiles] : null;\n    \n    // Clear input immediately\n    setInput('');\n    setUploadedFiles([]);\n    setIsLoading(true);\n    setIsGenerating(true);\n\n    // Add user message to UI immediately\n    const userMessageId = Date.now().toString();\n    const userMessage = { \n      id: userMessageId,\n      role: 'user', \n      content: messageText, \n      timestamp: new Date().toISOString(),\n      reaction: null,\n      isEdited: false,\n      files: messageFiles\n    };\n    \n    setMessages(prev => [...prev, userMessage]);\n\n    try {\n      // Call backend API for real AI response\n      const response = await apiService.sendMessage(messageText, currentConversationId, messageFiles);\n      \n      if (response.success) {\n        // Update conversation ID if this was a new conversation\n        if (!currentConversationId && response.conversationId) {\n          setCurrentConversationId(response.conversationId);\n        }\n\n        // Add AI response to UI\n        const botResponseId = Date.now().toString();\n        const botMessage = {\n          id: botResponseId,\n          role: 'assistant',\n          content: response.aiResponse.content,\n          timestamp: response.aiResponse.timestamp,\n          reaction: null,\n          isEdited: false,\n          model: response.aiResponse.model\n        };\n\n        setMessages(prev => [...prev, botMessage]);\n        \n        // Start typing animation\n        setTimeout(() => {\n          typeMessage(botResponseId, response.aiResponse.content);\n        }, 100);\n\n        showToast('Response generated successfully!');\n      } else {\n        throw new Error(response.error || 'Failed to get AI response');\n      }\n\n    } catch (error) {\n      console.error(\"Failed to get AI response:\", error);\n      \n      // Add error response\n      const errorResponse = {\n        id: Date.now().toString(),\n        role: 'assistant',\n        content: \"I apologize, but I'm having trouble connecting to our AI systems right now. Please try again in a moment, or reach out to your HR representative for immediate assistance.\",\n        timestamp: new Date().toISOString(),\n        reaction: null,\n        isEdited: false\n      };\n      \n      setMessages(prev => [...prev, errorResponse]);\n      showToast('Failed to get AI response. Please try again.', 'error');\n      \n    } finally {\n      setIsLoading(false);\n      setIsGenerating(false);\n      setGenerationTimeoutId(null);\n      setTypingMessageId(null);\n      typingTimeoutIds.forEach(timeoutId => clearTimeout(timeoutId));\n      setTypingTimeoutIds([]);\n    }\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n\n  const toggleVoiceMode = () => {\n    setIsVoiceMode(!isVoiceMode);\n    if (!isVoiceMode) {\n      showToast('Voice mode activated (demo)');\n    } else {\n      showToast('Voice mode deactivated');\n    }\n  };\n\n  const stopGeneration = () => {\n    if (generationTimeoutId) {\n      clearTimeout(generationTimeoutId);\n      setGenerationTimeoutId(null);\n    }\n    \n    typingTimeoutIds.forEach(timeoutId => clearTimeout(timeoutId));\n    setTypingTimeoutIds([]);\n    \n    setIsGenerating(false);\n    setIsLoading(false);\n    setTypingMessageId(null);\n    showToast('Generation stopped', 'error');\n  };\n\n  const getInputButton = () => {\n    if (isGenerating || typingMessageId) {\n      return {\n        icon: Square,\n        onClick: stopGeneration,\n        className: \"stop-button\",\n        title: \"Stop generation\",\n        disabled: false\n      };\n    } else if (input.trim()) {\n      return {\n        icon: ArrowUp,\n        onClick: (e) => {\n          e.preventDefault();\n          handleSubmit();\n        },\n        className: \"send-button\",\n        title: \"Send message\",\n        disabled: isLoading || isGenerating || typingMessageId\n      };\n    } else {\n      return {\n        icon: isVoiceMode ? MicOff : Mic,\n        onClick: toggleVoiceMode,\n        className: `voice-btn ${isVoiceMode ? 'active' : ''}`,\n        title: \"Voice input\",\n        disabled: isLoading || isGenerating || typingMessageId\n      };\n    }\n  };\n\n  const renderConversationItem = (conv) => (\n    <div \n      key={conv.id} \n      className={`conversation-item ${currentConversationId === conv.id ? 'active' : ''} ${conv.is_favourite ? 'favourite' : ''}`}\n      onClick={() => handleConversationClick(conv)}\n    >\n      {renamingConversationId === conv.id ? (\n        <div className=\"rename-input-container\">\n          <input\n            type=\"text\"\n            value={renamingText}\n            onChange={(e) => setRenamingText(e.target.value)}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter') saveRename();\n              if (e.key === 'Escape') cancelRename();\n            }}\n            onBlur={saveRename}\n            autoFocus\n            className=\"rename-input\"\n          />\n        </div>\n      ) : (\n        <span className=\"conversation-text\">{conv.title}</span>\n      )}\n      {conv.is_favourite && <Heart className=\"favourite-icon\" />}\n      <div className=\"conversation-actions\">\n        <button \n          className=\"dropdown-toggle\"\n          onClick={(e) => toggleDropdown(conv.id, e)}\n          title=\"More options\"\n        >\n          <MoreHorizontal className=\"icon-sm\" />\n        </button>\n        <ConversationDropdown\n          conversation={conv}\n          isOpen={openDropdownId === conv.id}\n          onClose={closeDropdown}\n          onFavourite={() => toggleConversationFavourite(conv.id, { stopPropagation: () => {} })}\n          onArchive={() => archiveConversation(conv.id, { stopPropagation: () => {} })}\n          onDelete={() => deleteConversation(conv.id, { stopPropagation: () => {} })}\n          onRename={() => startRenaming(conv.id)}\n        />\n      </div>\n    </div>\n  );\n\n  // If in test mode, show the database test component\n  if (testMode) {\n    return (\n      <div style={{ padding: '20px' }}>\n        <button \n          onClick={() => setTestMode(false)}\n          style={{ \n            marginBottom: '20px', \n            padding: '10px 20px', \n            backgroundColor: '#666', \n            color: 'white', \n            border: 'none', \n            borderRadius: '5px' \n          }}\n        >\n           Back to Main App\n        </button>\n        <DatabaseTest />\n      </div>\n    );\n  }\n\n  return (\n    <div className={`app-container ${isDarkMode ? 'dark' : 'light'}`}>\n      {/* Test Mode Button */}\n      <button \n        onClick={() => setTestMode(true)}\n        style={{\n          position: 'fixed',\n          top: '10px',\n          right: '10px',\n          zIndex: 9999,\n          padding: '10px 15px',\n          backgroundColor: '#4CAF50',\n          color: 'white',\n          border: 'none',\n          borderRadius: '5px',\n          fontSize: '12px'\n        }}\n      >\n         Test DB\n      </button>\n      \n      {/* Database connection status */}\n      {conversationsError && (\n        <div style={{\n          position: 'fixed',\n          top: '60px',\n          right: '10px',\n          zIndex: 9999,\n          padding: '10px 15px',\n          backgroundColor: '#f44336',\n          color: 'white',\n          borderRadius: '5px',\n          fontSize: '12px'\n        }}>\n          Database Error: {conversationsError}\n        </div>\n      )}\n\n      {showFileUpload && (\n        <div className=\"modal-overlay\" onClick={() => setShowFileUpload(false)}>\n          <div className=\"modal-content file-upload-modal\" onClick={e => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h2>Upload Files</h2>\n              <button onClick={() => setShowFileUpload(false)} className=\"modal-close\">\n                <X className=\"icon\" />\n              </button>\n            </div>\n            <FileUpload onFileSelect={handleFileSelect} />\n          </div>\n        </div>\n      )}\n\n      {toast && (\n        <Toast\n          message={toast.message}\n          type={toast.type}\n          onClose={() => setToast(null)}\n        />\n      )}\n\n      <ArchivedConversationsModal\n        isOpen={showArchivedModal}\n        onClose={() => setShowArchivedModal(false)}\n        conversations={archivedConversations}\n        onViewChat={viewArchivedChat}\n        onUnarchive={unarchiveConversation}\n        onDelete={deleteArchivedConversation}\n      />\n\n      <div className={`sidebar ${isSidebarCollapsed ? 'collapsed' : ''} ${isSidebarOpen ? 'open' : ''} ${isSidebarHidden ? 'hidden' : ''}`}>\n        <div className=\"sidebar-header\">\n          <button onClick={handleNewChat} className=\"new-chat-btn\">\n            <Plus className=\"icon\" />\n            {!isSidebarCollapsed && <span>New chat</span>}\n          </button>\n        </div>\n        \n        {!isSidebarCollapsed && (\n          <>\n            <div className=\"search-container\">\n              <div className={`search-wrapper ${isSearchFocused ? 'focused' : ''}`}>\n                <Search className=\"search-icon\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"Search chats\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  onFocus={() => setIsSearchFocused(true)}\n                  onBlur={() => setIsSearchFocused(false)}\n                  className=\"search-input\"\n                />\n              </div>\n            </div>\n\n            <div className=\"conversation-filters\">\n              <button\n                className={`filter-btn ${conversationFilter === 'all' ? 'active' : ''}`}\n                onClick={() => setConversationFilter('all')}\n              >\n                All\n              </button>\n              <button\n                className={`filter-btn ${conversationFilter === 'favourites' ? 'active' : ''}`}\n                onClick={() => setConversationFilter('favourites')}\n              >\n                Favourites\n              </button>\n            </div>\n\n            <div className=\"conversation-list\">\n              {conversationsLoading ? (\n                <div style={{ padding: '20px', textAlign: 'center', color: '#666' }}>\n                  Loading conversations...\n                </div>\n              ) : (\n                <>\n                  {conversationGroups.today.length > 0 && (\n                    <div className=\"conversation-group\">\n                      <div className=\"group-label\">Today</div>\n                      {conversationGroups.today.map(renderConversationItem)}\n                    </div>\n                  )}\n\n                  {conversationGroups.yesterday.length > 0 && (\n                    <div className=\"conversation-group\">\n                      <div className=\"group-label\">Yesterday</div>\n                      {conversationGroups.yesterday.map(renderConversationItem)}\n                    </div>\n                  )}\n\n                  {conversationGroups.lastWeek.length > 0 && (\n                    <div className=\"conversation-group\">\n                      <div className=\"group-label\">Previous 7 days</div>\n                      {conversationGroups.lastWeek.map(renderConversationItem)}\n                    </div>\n                  )}\n\n                  {conversationGroups.lastMonth.length > 0 && (\n                    <div className=\"conversation-group\">\n                      <div className=\"group-label\">Previous 30 days</div>\n                      {conversationGroups.lastMonth.map(renderConversationItem)}\n                    </div>\n                  )}\n\n                  {conversationGroups.older.length > 0 && (\n                    <div className=\"conversation-group\">\n                      <div className=\"group-label\">Older</div>\n                      {conversationGroups.older.map(renderConversationItem)}\n                    </div>\n                  )}\n                  \n                  {pastConversations.length === 0 && !conversationsLoading && (\n                    <div style={{ \n                      padding: '20px', \n                      textAlign: 'center', \n                      color: '#666',\n                      fontSize: '14px'\n                    }}>\n                      No conversations yet.<br />\n                      Start a new chat to get started!\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n          </>\n        )}\n        \n        <div className=\"sidebar-footer\">\n          <button onClick={toggleTheme} className=\"theme-toggle\">\n            {isDarkMode ? <Sun className=\"icon\" /> : <Moon className=\"icon\" />}\n            {!isSidebarCollapsed && <span>{isDarkMode ? 'Light mode' : 'Dark mode'}</span>}\n          </button>\n          \n          <button onClick={() => setShowArchivedModal(true)} className=\"archive-toggle-btn\">\n            <Archive className=\"icon\" />\n            {!isSidebarCollapsed && <span>Archived ({archivedConversations.length})</span>}\n          </button>\n          \n          {!isSidebarCollapsed && (\n            <div className=\"user-section\">\n              <div style={{ \n                padding: '10px', \n                textAlign: 'center', \n                fontSize: '12px', \n                color: '#666',\n                borderTop: '1px solid #eee'\n              }}>\n                Single User Mode - No Login Required\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className={`main-content ${isSidebarOpen ? 'sidebar-open' : ''} ${isSidebarHidden ? 'sidebar-hidden' : ''}`}>\n        <div className=\"chat-header\">\n          <button onClick={toggleSidebar} className=\"sidebar-toggle\">\n            <Sidebar className=\"icon\" />\n          </button>\n          <h1 className=\"chat-title\">\n            {currentConversationId \n              ? pastConversations.find(c => c.id === currentConversationId)?.title || 'Chat'\n              : 'Onboarding Assistant'\n            }\n          </h1>\n        </div>\n\n        <div className=\"chat-container\" ref={chatContainerRef}>\n          {messages.length === 0 ? (\n            <div className=\"welcome-screen\">\n              <div className=\"welcome-icon\">\n                <Bot size={48} />\n              </div>\n              <h1 className=\"welcome-title\">How can I help you today?</h1>\n              <p className=\"welcome-subtitle\">\n                I'm your onboarding assistant. Ask me anything about company policies, benefits, procedures, or getting started at the company.\n              </p>\n\n              <div className=\"suggestion-cards\">\n                <div className=\"suggestion-card\" onClick={() => setInput(\"What are the company's vacation policies?\")}>\n                  <span> Vacation</span>\n                </div>\n                <div className=\"suggestion-card\" onClick={() => setInput(\"How do I set up my IT equipment?\")}>\n                  <span> IT Setup</span>\n                </div>\n                <div className=\"suggestion-card\" onClick={() => setInput(\"What benefits do I have access to?\")}>\n                  <span> Benefits</span>\n                </div>\n                <div className=\"suggestion-card\" onClick={() => setInput(\"Who are my team members?\")}>\n                  <span> Team</span>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"chat-messages\">\n              {messages.map((msg, index) => (\n                <div key={msg.id || index} className={`message ${msg.role}`}>\n                  <div className=\"message-avatar\">\n                    {msg.role === 'user' ? (\n                      <div className=\"avatar user-avatar-chat\">\n                        <User className=\"icon\" />\n                      </div>\n                    ) : (\n                      <div className=\"avatar assistant-avatar\">\n                        <Bot className=\"icon\" />\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"message-content\">\n                    {editingMessageId === msg.id ? (\n                      <div className=\"edit-container\">\n                        <textarea\n                          value={editingText}\n                          onChange={(e) => setEditingText(e.target.value)}\n                          className=\"edit-textarea\"\n                          autoFocus\n                        />\n                        <div className=\"edit-actions\">\n                          <button onClick={saveMessageEdit} className=\"edit-save\">\n                            <Check className=\"icon-sm\" /> Save\n                          </button>\n                          <button onClick={() => setEditingMessageId(null)} className=\"edit-cancel\">\n                            <X className=\"icon-sm\" /> Cancel\n                          </button>\n                        </div>\n                      </div>\n                    ) : (\n                      <>\n                        <div className=\"message-text\">\n                          {msg.role === 'assistant' && displayedContent[msg.id] !== undefined\n                            ? displayedContent[msg.id]\n                            : msg.content}\n                          {typingMessageId === msg.id && (\n                            <span className=\"typing-cursor\">|</span>\n                          )}\n                          {msg.isEdited && <span className=\"edited-indicator\">(edited)</span>}\n                          {msg.reaction && (\n                            <span className={`reaction ${msg.reaction}`}>\n                              {msg.reaction === 'like' ? '' : ''}\n                            </span>\n                          )}\n                        </div>\n                        \n                        {msg.files && (\n                          <div className=\"message-files\">\n                            {msg.files.map(file => (\n                              <div key={file.id} className=\"file-attachment\">\n                                <FileText className=\"icon-sm\" />\n                                <span>{file.name}</span>\n                                <span className=\"file-size\">({(file.size / 1024).toFixed(1)} KB)</span>\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                        \n                        <div className=\"message-meta\">\n                          <div className=\"message-time\">\n                            {new Date(msg.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}\n                          </div>\n                          <MessageActions\n                            message={msg}\n                            onCopy={copyToClipboard}\n                            onEdit={handleMessageEdit}\n                            onReact={handleMessageReaction}\n                            onRegenerate={regenerateResponse}\n                          />\n                        </div>\n                      </>\n                    )}\n                  </div>\n                </div>\n              ))}\n              \n              {isLoading && (\n                <div className=\"message assistant\">\n                  <div className=\"message-avatar\">\n                    <div className=\"avatar assistant-avatar\">\n                      <Bot className=\"icon\" />\n                    </div>\n                  </div>\n                  <div className=\"message-content\">\n                    <SkeletonLoader />\n                  </div>\n                </div>\n              )}\n              \n              <div ref={chatEndRef} />\n            </div>\n          )}\n        </div>\n\n        <div className=\"input-section\">\n          <div className=\"input-container\">\n            {showScrollToBottom && (\n              <button \n                onClick={scrollToBottom}\n                className={`scroll-to-bottom ${showScrollToBottom ? 'visible' : ''}`}\n                title=\"Scroll to bottom\"\n              >\n                <ArrowUp className=\"icon\" style={{ transform: 'rotate(180deg)' }} />\n              </button>\n            )}\n            \n            {uploadedFiles.length > 0 && (\n              <div className=\"uploaded-files\">\n                {uploadedFiles.map(file => (\n                  <div key={file.id} className=\"uploaded-file\">\n                    <FileText className=\"icon-sm\" />\n                    <span>{file.name}</span>\n                    <button \n                      onClick={() => removeFile(file.id)}\n                      className=\"remove-file\"\n                    >\n                      <X className=\"icon-sm\" />\n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n\n            <form onSubmit={handleSubmit}>\n              <div className=\"input-wrapper\">\n                <div className=\"input-actions-left\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowFileUpload(true)}\n                    className=\"file-btn\"\n                    title=\"Upload files\"\n                  >\n                    <Paperclip className=\"icon\" />\n                  </button>\n                </div>\n                \n                <textarea\n                  ref={inputRef}\n                  value={input}\n                  onChange={e => setInput(e.target.value)}\n                  onKeyDown={handleKeyDown}\n                  placeholder={isGenerating || typingMessageId ? \"Generating response...\" : \"Message ChatGPT...\"}\n                  className=\"message-input\"\n                  rows={1}\n                  disabled={isGenerating || typingMessageId}\n                />\n                \n                <div className=\"input-actions-right\">\n                  {(() => {\n                    const buttonConfig = getInputButton();\n                    const IconComponent = buttonConfig.icon;\n                    return (\n                      <button\n                        type={buttonConfig.className === \"send-button\" ? \"submit\" : \"button\"}\n                        onClick={buttonConfig.className === \"send-button\" ? undefined : buttonConfig.onClick}\n                        disabled={buttonConfig.disabled}\n                        className={buttonConfig.className}\n                        title={buttonConfig.title}\n                      >\n                        <IconComponent className=\"icon\" />\n                      </button>\n                    );\n                  })()}\n                </div>\n              </div>\n            </form>\n            <div className=\"input-footer\">\n              <span>ChatGPT can make mistakes. Check important info.</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}